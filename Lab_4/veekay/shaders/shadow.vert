#version 450

// ============================================================================
// ВХОДНЫЕ ДАННЫЕ (АТРИБУТЫ ВЕРШИН)
// ============================================================================
layout(location = 0) in vec3 in_position;  // Позиция вершины в локальных координатах

// ============================================================================
// UNIFORM-БУФЕРЫ
// ============================================================================

// Для shadow pass используется упрощенный uniform с одной матрицей
layout(binding = 0) uniform LightSpaceUniforms {
    mat4 light_space_matrix;  // Комбинированная матрица proj*view для света
} light_space;

// Матрица трансформации модели (та же структура что в основном шейдере)
layout(binding = 1) uniform ModelUniforms {
    mat4 model;              // Матрица Model (позиция, поворот, масштаб объекта)
    vec3 albedo_color;       // Не используется в shadow pass
    float shininess;         // Не используется
    vec3 specular_color;     // Не используется
    float _pad0;
} model_data;

// ============================================================================
// ГЛАВНАЯ ФУНКЦИЯ
// ============================================================================
// Задача: преобразовать вершину в пространство света для записи глубины
void main() {
    // Трансформируем вершину: сначала в мировые координаты, затем в light space
    gl_Position = light_space.light_space_matrix * model_data.model * vec4(in_position, 1.0);
}